---
title: Authentication
description: User authentication, EchoProvider setup, and auth state management
---

# Authentication

## EchoProvider Setup

The `EchoProvider` component wraps your application and manages OAuth2 + PKCE authentication flow.

```tsx
import { EchoProvider } from '@merit-systems/echo-react-sdk';

function App() {
  return (
    <EchoProvider config={{
      appId: 'your-echo-app-id',
      apiUrl: 'https://echo.merit.systems',
      redirectUri: window.location.origin, // Optional
      scope: 'llm:invoke offline_access' // Optional
    }}>
      <YourApp />
    </EchoProvider>
  );
}
```

### EchoAuthConfig

```typescript
import type { EchoAuthConfig } from '@merit-systems/echo-react-sdk';
```

#### EchoAuthConfig

<AutoTypeTable 
  path="../echo-react-sdk/src/types/index.ts" 
  name="EchoAuthConfig" 
/>

### EchoContextValue

The context value provided by EchoProvider, accessible via `useEcho()`.

```typescript
import type { EchoContextValue } from '@merit-systems/echo-react-sdk';
```

#### EchoContextValue

<AutoTypeTable 
  path="../echo-react-sdk/src/components/EchoProvider.tsx" 
  name="EchoContextValue" 
/>

## useEcho Hook

Primary hook for accessing authentication state, user information, and core functionality.

```tsx
import { useEcho } from '@merit-systems/echo-react-sdk';

function AuthComponent() {
  const { 
    user, 
    isAuthenticated, 
    isLoading,
    error,
    signIn, 
    signOut,
    token,
    getToken
  } = useEcho();
  
  if (isLoading) {
    return <div>Loading...</div>;
  }
  
  if (error) {
    return <div>Error: {error}</div>;
  }
  
  if (!isAuthenticated) {
    return <button onClick={signIn}>Sign In</button>;
  }
  
  return (
    <div>
      <p>Welcome {user?.name || user?.email}!</p>
      <button onClick={signOut}>Sign Out</button>
    </div>
  );
}
```

## User Types

### EchoUser

User information from OAuth2 authentication.

```typescript
import type { EchoUser } from '@merit-systems/echo-react-sdk';
```

#### EchoUser

<AutoTypeTable 
  path="../echo-react-sdk/src/types/index.ts" 
  name="EchoUser" 
/>

## Authentication Patterns

### Conditional Rendering

```tsx
function ProtectedContent() {
  const { isAuthenticated, user } = useEcho();
  
  return (
    <div>
      {isAuthenticated ? (
        <div>
          <h1>Welcome {user?.name}!</h1>
          <ProtectedFeatures />
        </div>
      ) : (
        <div>
          <h1>Please sign in</h1>
          <EchoSignIn />
        </div>
      )}
    </div>
  );
}
```

### Loading States

```tsx
function AuthWrapper() {
  const { isAuthenticated, isLoading, error } = useEcho();
  
  if (isLoading) {
    return <div>Authenticating...</div>;
  }
  
  if (error) {
    return <div>Authentication failed: {error}</div>;
  }
  
  return isAuthenticated ? <App /> : <LoginPage />;
}
```

### Manual Sign In/Out

```tsx
function AuthControls() {
  const { isAuthenticated, signIn, signOut, user } = useEcho();
  
  return (
    <div>
      {isAuthenticated ? (
        <div>
          <span>Signed in as {user?.email}</span>
          <button onClick={signOut}>Sign Out</button>
        </div>
      ) : (
        <button onClick={signIn}>Sign In</button>
      )}
    </div>
  );
}
```

## Token Access

Tokens are managed automatically, but you can access them for debugging or custom usage:

```tsx
function TokenDebug() {
  const { token, getToken } = useEcho();
  
  const handleGetToken = async () => {
    const currentToken = await getToken();
    console.log('Current token:', currentToken);
  };
  
  return (
    <div>
      <p>Token available: {token ? 'Yes' : 'No'}</p>
      <button onClick={handleGetToken}>Log Token</button>
    </div>
  );
}
```