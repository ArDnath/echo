{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "merit-account",
  "type": "registry:component",
  "title": "Merit Account",
  "description": "A super merit account component",
  "registryDependencies": [
    "button",
    "popover",
    "avatar",
    "input",
    "label",
    "money-input",
    "card"
  ],
  "files": [
    {
      "path": "registry/echo/blocks/echo-account-button/index.tsx",
      "content": "'use client';\nimport { Button } from '@/registry/echo/ui/button';\nimport { Popover, PopoverTrigger } from '@/registry/echo/ui/popover';\nimport { Logo, useEcho } from '@merit-systems/echo-react-sdk';\nimport { Gift } from 'lucide-react';\nimport { EchoAccountButtonPopover } from './popover';\n\nexport function EchoAccountButton() {\n  const { user, balance, freeTierBalance, signIn, isLoading } = useEcho();\n\n  const totalBalance =\n    (balance?.balance || 0) + (freeTierBalance?.userSpendInfo.amountLeft || 0);\n  const hasFreeCredits = freeTierBalance?.userSpendInfo.amountLeft ?? 0 > 0;\n  const buttonContent = isLoading ? (\n    <div className=\"flex items-center gap-2\">\n      <div className=\"w-4 h-4 bg-muted animate-pulse rounded\" />\n      <div className=\"w-16 h-4 bg-muted animate-pulse rounded\" />\n    </div>\n  ) : !user ? (\n    'Sign In'\n  ) : (\n    <div className=\"flex items-center gap-2\">\n      <Logo width={16} height={16} variant=\"light\" />\n      <span className=\"flex items-center gap-1\">\n        ${totalBalance.toLocaleString()}\n        {hasFreeCredits && <Gift className=\"size-3 text-muted-foreground\" />}\n      </span>\n    </div>\n  );\n\n  const button = (\n    <Button\n      variant=\"outline\"\n      onClick={!user ? signIn : undefined}\n      disabled={isLoading}\n    >\n      {buttonContent}\n    </Button>\n  );\n\n  if (!user || isLoading) {\n    return button;\n  }\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>{button}</PopoverTrigger>\n      <EchoAccountButtonPopover showAllApps />\n    </Popover>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}